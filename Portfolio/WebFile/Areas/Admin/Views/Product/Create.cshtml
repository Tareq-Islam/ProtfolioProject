@model CML.CategoryProductMediaRModel

@{
    ViewBag.Title = "Create";
}

<div class="card mb-2">
    <div class="card-header">
        <i class="fa fa-user"></i>
        &nbsp; New Project Create Panel
    </div>
    <div class="card-body">

        @using (Html.BeginForm("Create","Product", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            <div class="row">
               
                <div class="col-md-5">
                    <div class="card-header bg-primary">
                        Project information
                    </div>
                    <div class="card-body border border-primary">
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                        <div class="form-group">
                            @Html.LabelFor(model => model.ProductName, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.ProductName, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.ProductName, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.CategoryName, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.DropDownList("CategoryId", null, htmlAttributes: new { @class = "form-control" })
                                @Html.ValidationMessageFor(model => model.CategoryName, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.ProductFeature, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.ProductFeature, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.ProductFeature, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.DisplayOrder, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.DisplayOrder, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.DisplayOrder, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.IsActive, htmlAttributes: new { @class = "control-label" })
                            <div>
                                @Html.EditorFor(model => model.IsActive, new { htmlAttributes = new { @class = "form-control" } })
                                @Html.ValidationMessageFor(model => model.IsActive, "", new { @class = "text-danger" })
                            </div>
                        </div>
                    </div>
                </div>
               <div class="col-1"></div>
                <div class="col-md-6">
                    <div class="card-header bg-primary">
                        Image information
                    </div>
                    <div class="card-body border border-primary">
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-12">
                                    <label>Upload Image</label>
                                    @*<input type="file" id="imgInp">*@
                                    @Html.TextBox("file", "", new { type = "file", @id = "file" })
                                </div>
                                
                                
                            </div>
                            <br/>
                            <div class="row">
                                <div class="col-md-4">
                                    <img id='img-upload' width="100" height="100" class="img-fluid"/>
                                </div>
                                
                            </div>
                            
                            
                        </div>
                        
                        @*<div class="container">
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label>Upload Image</label>
                                    <div class="input-group">
                                        <span class="input-group-btn">
                                            <span class="btn btn-default btn-link">
                                               <input type="file" id="imgInp">
                                            </span>
                                        </span>
                                       
                                    </div>
                                    <img id='img-upload'/>
                                </div>
                            </div>
                        </div>*@

                        <div class="form-group">
                            @Html.LabelFor(model => model.Caption, htmlAttributes: new {@class = "control-label"})
                            <div>
                                @Html.EditorFor(model => model.Caption, new {htmlAttributes = new {@class = "form-control"}})
                                @Html.ValidationMessageFor(model => model.Caption, "", new {@class = "text-danger"})
                            </div>
                        </div>
                        <div class="form-group">
                            @Html.LabelFor(model => model.ShortDetails, htmlAttributes: new {@class = "control-label"})
                            <div>
                                @Html.EditorFor(model => model.ShortDetails, new {htmlAttributes = new {@class = "form-control"}})
                                @Html.ValidationMessageFor(model => model.ShortDetails, "", new {@class = "text-danger"})
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.IsDefault, htmlAttributes: new {@class = "control-label"})
                            <div>
                                @Html.EditorFor(model => model.IsDefault, new {htmlAttributes = new {@class = "form-control"}})
                                @Html.ValidationMessageFor(model => model.IsDefault, "", new {@class = "text-danger"})
                            </div>
                        </div>

                        <div class="form-group">
                            @Html.LabelFor(model => model.IsThumbnail, htmlAttributes: new {@class = "control-label"})
                            <div>
                                @Html.EditorFor(model => model.IsThumbnail, new {htmlAttributes = new {@class = "form-control"}})
                                @Html.ValidationMessageFor(model => model.IsThumbnail, "", new {@class = "text-danger"})
                            </div>
                        </div>

                    </div>
                </div>
               
            </div>
            <br/>
            <div class="row">

                <div class="col-12">
                    <input type="submit" value="Create" class="btn btn-info btn-block"/>
                </div>

            </div>
        }

      


    </div>
    <div class="card-footer">
        @Html.ActionLink("Back to List", "Index")
    </div>
</div>
<script>
    $(document).ready( function() {
        $(document).on('change', '.btn-file :file', function() {
            var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
            input.trigger('fileselect', [label]);
        });

        $('.btn-file :file').on('fileselect', function(event, label) {
		    
            var input = $(this).parents('.input-group').find(':text'),
                log = label;
		    
            if( input.length ) {
                input.val(log);
            } else {
                if( log ) alert(log);
            }
	    
        });
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
		        
                reader.onload = function (e) {
                    $('#img-upload').attr('src', e.target.result);
                }
		        
                reader.readAsDataURL(input.files[0]);
            }
        }

        $("#file").change(function(){
            readURL(this);
        }); 	
    });
</script>